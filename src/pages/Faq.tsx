import { Link } from "react-router-dom";
import { ChevronDown } from "lucide-react";
import PageContainer from "@/components/PageContainer";
import { Card, CardContent } from "@/components/ui/card";

type FaqItem = { question: string; answer: React.ReactNode };

function faqSection(title: string, items: FaqItem[]): { title: string; items: FaqItem[] } {
  return { title, items };
}

const FAQ_SECTIONS = [
  faqSection("Общие вопросы", [
    {
      question: "Что такое Betwix и какую роль она выполняет?",
      answer: (
        <>
          Betwix — цифровая платформа учёта прав, витрины объектов и P2P-рынка. Платформа не владеет объектами и не управляет ими напрямую: она обеспечивает инфраструктуру для размещения предложений, учёта долей и сделок между участниками.
        </>
      ),
    },
    {
      question: "Я покупаю недвижимость или долю в доходе?",
      answer: (
        <>
          Вы инвестируете в долю дохода, а не приобретаете объект недвижимости напрямую. Права и условия закреплены в договорах и правилах платформы.
        </>
      ),
    },
    {
      question: "Является ли Betwix управляющей компанией?",
      answer: (
        <>
          Нет. Управление объектом осуществляет выбранная управляющая компания. Betwix предоставляет платформу для учёта прав, отображения объектов и проведения сделок.
        </>
      ),
    },
    {
      question: "Кто участвует в процессе кроме Betwix?",
      answer: (
        <>
          В процессе участвуют владельцы объектов (или структуры, владеющие объектами), управляющие компании, инвесторы и при необходимости партнёры. Betwix выступает оператором платформы.
        </>
      ),
    },
  ]),
  faqSection("Инвестирование", [
    {
      question: "Как я зарабатываю на инвестициях?",
      answer: (
        <>
          Доход формируется из арендных поступлений и/или роста стоимости доли — в зависимости от условий конкретного объекта и модели участия.
        </>
      ),
    },
    {
      question: "Когда выплачивается доход?",
      answer: (
        <>
          Сроки и порядок выплат зависят от условий объекта и политики управляющей компании. Обычно они указаны в карточке объекта и в документах.
        </>
      ),
    },
    {
      question: "Могу ли я продать долю раньше срока?",
      answer: (
        <>
          Продажа доли возможна через P2P-рынок платформы при наличии спроса. Условия досрочного выхода могут отличаться по объектам — смотрите описание объекта и правила.
        </>
      ),
    },
    {
      question: "Есть ли минимальная сумма инвестиций?",
      answer: (
        <>
          Минимальная сумма указывается в карточке каждого объекта. Порог может отличаться в зависимости от предложения.
        </>
      ),
    },
  ]),
  faqSection("Риски", [
    {
      question: "Какие основные риски инвестирования?",
      answer: (
        <>
          Инвестиции в недвижимость не гарантируют фиксированный доход. Возможны риски ликвидности, изменения рыночной конъюнктуры, качества управления и другие. Подробно риски раскрыты в разделе{" "}
          <Link to="/risks" className="text-blue-600 hover:underline">Риски инвестирования</Link>.
        </>
      ),
    },
    {
      question: "Может ли доход быть ниже ожидаемого?",
      answer: (
        <>
          Да. Доход зависит от арендаторов, состояния рынка и качества управления объектом. Показатели в материалах объекта носят ориентировочный характер.
        </>
      ),
    },
    {
      question: "Что если объект временно не приносит доход?",
      answer: (
        <>
          При простое или снижении поступлений выплаты инвесторам могут быть уменьшены или перенесены в соответствии с условиями объекта и правилами платформы.
        </>
      ),
    },
    {
      question: "Кто несёт ответственность за управление объектом?",
      answer: (
        <>
          Ответственность за управление объектом несёт управляющая компания. Betwix обеспечивает работу платформы и учёт прав, но не управляет объектами.
        </>
      ),
    },
  ]),
  faqSection("Комиссии и платежи", [
    {
      question: "Какие комиссии взимает Betwix?",
      answer: (
        <>
          Платформа взимает комиссии за операции и сервисные сборы за инфраструктуру. Конкретные ставки и условия отображаются в карточке объекта и при подтверждении сделки.
        </>
      ),
    },
    {
      question: "Когда списывается комиссия?",
      answer: (
        <>
          Комиссии списываются при совершении соответствующих операций (вход в сделку, вывод средств и т.д.). Момент списания показывается до подтверждения операции.
        </>
      ),
    },
    {
      question: "Видны ли комиссии до подтверждения сделки?",
      answer: (
        <>
          Да. Комиссии отображаются до подтверждения любой операции. Сумма и момент списания указываются в интерфейсе.
        </>
      ),
    },
    {
      question: "Есть ли скрытые платежи?",
      answer: (
        <>
          Скрытых комиссий нет. Все списания отображаются в истории операций в личном кабинете. Условия описаны в правилах платформы.
        </>
      ),
    },
  ]),
  faqSection("Юридика и ответственность", [
    {
      question: "Кто является владельцем объекта юридически?",
      answer: (
        <>
          Betwix не владеет объектами. Юридическим владельцем является указанное в документах лицо или структура (например, владелец объекта или спецпроектная компания).
        </>
      ),
    },
    {
      question: "Какие документы регулируют инвестиции?",
      answer: (
        <>
          Юридические условия определяются договорами с платформой и правилами платформы, а также документами по конкретному объекту. Подробности — в разделе{" "}
          <Link to="/documents" className="text-blue-600 hover:underline">Документы и правила</Link>.
        </>
      ),
    },
    {
      question: "Что делает Betwix в случае спора?",
      answer: (
        <>
          Порядок разрешения споров описан в правилах платформы. Betwix обеспечивает учёт прав и работу сервиса; споры по объектам и сделкам регулируются договорами и применимым правом.
        </>
      ),
    },
  ]),
];

export default function Faq() {
  return (
    <PageContainer>
      <div className="max-w-3xl space-y-8 pb-10">
        <header>
          <h1 className="text-2xl font-semibold text-slate-900 tracking-tight">
            FAQ
          </h1>
          <p className="mt-1.5 text-sm text-slate-600 leading-relaxed">
            Ответы на частые вопросы о платформе Betwix, инвестициях и работе с объектами.
          </p>
        </header>

        {FAQ_SECTIONS.map((section) => (
          <section key={section.title}>
            <h2 className="text-base font-semibold text-slate-900 mb-3">
              {section.title}
            </h2>
            <div className="space-y-2">
              {section.items.map((item, i) => (
                <details
                  key={i}
                  className="group rounded-lg border border-slate-200 bg-white shadow-sm"
                >
                  <summary className="flex cursor-pointer list-none items-center justify-between gap-2 px-4 py-3 text-left font-medium text-slate-900 hover:bg-slate-50/80 transition-colors rounded-lg">
                    <span>{item.question}</span>
                    <ChevronDown className="h-5 w-5 shrink-0 text-slate-500 transition-transform group-open:rotate-180" />
                  </summary>
                  <div className="px-4 pb-4 pt-0 border-t border-slate-100">
                    <div className="text-sm text-slate-600 leading-relaxed pt-3">
                      {item.answer}
                    </div>
                  </div>
                </details>
              ))}
            </div>
          </section>
        ))}

        <Card className="border border-slate-200 bg-slate-50/50">
          <CardContent className="py-5">
            <p className="text-sm text-slate-700 mb-3">
              Не нашли ответ?
            </p>
            <Link
              to="/contacts"
              className="inline-block text-sm font-medium text-blue-600 hover:underline"
            >
              Свяжитесь с поддержкой
            </Link>
          </CardContent>
        </Card>
      </div>
    </PageContainer>
  );
}
